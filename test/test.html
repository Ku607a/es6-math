<!DOCTYPE html>
<html>
	<head>
		<title>Test math-ext.js</title>
		<script>
(function(mlist, nlist) {
	for (var i = 0; i < mlist.length; i++)
		if (mlist[i] in Math) {
			Math["_" + mlist[i]] = Math[mlist[i]];
			Math[mlist[i]] = null;
		}

	for (var i = 0; i < nlist.length; i++)
		if (nlist[i] in Number) {
			Number["_" + nlist[i]] = Number[nlist[i]];
			Number[nlist[i]] = null;
		}
})(["log10", "log2", "log1p", "expm1", "cosh", "sinh", "tanh", "acosh", "asinh", "atanh", "hypot", "trunc", "sign", "imul", "fround", "cbrt", "clz32"],
		["isNaN", "isFinite", "isInteger", "isSafeInteger", "parseInt", "parseFloat"]);
		</script>
		<script src="../es6-math.js"></script>
		<script>
(function() {

function assert_values(object, func, args, values) {
	for (var i = 0, resp, arg, val, res; i < args.length; i++) {
		arg = args[i];
		val = values[i];
		res = arg instanceof Array ? object[func].apply(object, arg) : object[func](arg);
		if (val !== val) // NaN
			resp = isNaN(res);
		else if (val === 0 && 1/val === -Infinity) { // -0
			resp = 1/res === -Infinity;
			val = "-0";
		} else resp = res === val;
		console.assert(resp, func + "(" + arg + ") => " + res + ": expected " + val);
	}
}

// Hyperbolic functions
assert_values(Math, "sinh", [0, Math.LN2, null, Infinity, -Infinity, NaN, undefined, "A"],
							[0,      .75,    0, Infinity, -Infinity, NaN,       NaN, NaN]);

assert_values(Math, "cosh", [0, Math.LN2, null, Infinity, -Infinity, NaN, undefined, "A"],
							[1,     1.25,    1, Infinity,  Infinity, NaN,       NaN, NaN]);

assert_values(Math, "tanh", [0, Math.LN2, null, Infinity, -Infinity, NaN, undefined, "A"],
							[0,       .6,    0,        1,        -1, NaN,       NaN, NaN]);

assert_values(Math, "asinh", [0,      .75, null, Infinity, -Infinity, NaN, undefined, "A"],
							 [0, Math.LN2,    0, Infinity, -Infinity, NaN,       NaN, NaN]);

assert_values(Math, "acosh", [1,     1.25,   0,  -1, null, Infinity, -Infinity, NaN, undefined, "A"],
							 [0, Math.LN2, NaN, NaN,  NaN, Infinity,       NaN, NaN,       NaN, NaN]);

assert_values(Math, "atanh", [0,       .6, null,        1,        -1, NaN, undefined, "A"],
							 [0, Math.LN2,    0, Infinity, -Infinity, NaN,       NaN, NaN]);

// Exponentials and logarithms
assert_values(Math, "expm1", [0, -0, Math.LN2, -Math.LN2, Infinity, -Infinity, null, NaN, undefined, "A"],
							 [0, -0,        1,       -.5, Infinity,        -1,    0, NaN,       NaN, NaN]);

assert_values(Math, "log1p", [0, -0,        1,       -.5, Infinity, -Infinity, null, NaN, undefined, "A"],
							 [0, -0, Math.LN2, -Math.LN2, Infinity,       NaN,    0, NaN,       NaN, NaN]);

assert_values(Math, "log2", [4,  -4,         0,      null, NaN, undefined, "A"],
							[2, NaN, -Infinity, -Infinity, NaN,       NaN, NaN]);

assert_values(Math, "log10", [100,  -100,         0,      null, NaN, undefined, "A"],
							 [  2,   NaN, -Infinity, -Infinity, NaN,       NaN, NaN]);


// Various
assert_values(Math, "sign", [0, -0, 1, 100, -1, -100, Infinity, -Infinity, null, NaN, undefined, "A"],
							[0, -0, 1,   1, -1,   -1,        1,        -1,    0, NaN,       NaN, NaN]);

assert_values(Math, "cbrt", [0, -0, 1, 27, -1, -27, Infinity, -Infinity, null, NaN, undefined, "A"],
							[0, -0, 1,  3, -1,  -3, Infinity, -Infinity,    0, NaN,       NaN, NaN]);

assert_values(Math, "hypot", [0, -0, 1, -1, Infinity, -Infinity, null, NaN, undefined, "A", [3, 4], [3, 4, 12]],
							 [0,  0, 1,  1, Infinity,  Infinity,    0, NaN,       NaN, NaN,      5,         13]);

// Rounding and 32-bit operations
assert_values(Math, "clz32", [ 0, 3.5,  5, -5, 2147483647, 2147483648, 4294967296, Infinity, -Infinity, null, NaN, undefined, "A"],
							 [32,  30, 29,  0,          1,          0,         32,       32,        32,   32,  32,        32,  32]);

assert_values(Math, "imul",  [0, 1, -1, [3, 4], [3.5, 2], [2, 2, 2], [1, 2147483647], [2, 1073741824], [1, 4294967296], [1, Infinity], [1, null], [1, NaN], [1, undefined], [1, "A"]],
							 [0, 0,  0,     12,        6,         4,      2147483647,     -2147483648,               0,             0,         0,        0,              0,        0]);

// Number functions
assert_values(Number, "isNaN", [    0,  NaN, Infinity,   "A",   "0"],
							   [false, true,    false, false, false]);

assert_values(Number, "isFinite", [   0, -1.2,   NaN, Infinity,   "A",   "0"],
								  [true, true, false,    false, false, false]);

assert_values(Number, "isInteger", [   0,  -1.2, 9007199254740992,   NaN, Infinity,   "A",   "0"],
								   [true, false,             true, false,    false, false, false]);

assert_values(Number, "isSafeInteger", [   0,  -1.2, 9007199254740991, 9007199254740992,   NaN, Infinity,   "A",   "0"],
									   [true, false,             true,            false, false,    false, false, false]);

// Number.parseFloat and Number.parseInt behave exactly like parseFloat and parseInt, espectively
// (they're actually the same functions in Chrome).
})();
		</script>
	</head>
	<body>
	</body>
</html>